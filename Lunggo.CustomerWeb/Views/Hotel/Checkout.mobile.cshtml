@{
    Layout = "/Views/Shared/mobile/_Layout.cshtml";
    ViewBag.BodyClass = "page-hotel page page-checkout";
    ViewBag.AngularController = "paymentController";
    ViewBag.SiteHeader = "Payment";
    ViewBag.Title = "Pembayaran";
}

@section AdditionalCSS {
    <link href="/Assets/css/jquery-ui.min.css" rel="stylesheet" />
    <!-- fancybox CSS-->
    <link href="/Assets/vendor/fancybox/jquery.fancybox.css" rel="stylesheet" />
}

@section AdditionalJS {
    <!-- additional Angular JS-->
    <script src="/Assets/js/angular.min.js"></script>
    <script src="/Assets/js/angular-animate.min.js"></script>
    <script src="/Assets/js/angular-route.min.js"></script>
    <script src="/Assets/js/jquery.countdown.min.js"></script>
    <script src="/Assets/js/CryptoJS/components/core-min.js"></script>
    <script src="/Assets/js/CryptoJS/rollups/sha512.js"></script>
    <script src="/Assets/js/CryptoJS/components/enc-base64-min.js"></script>
    <!-- veritrans JS -->
    <script src="https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js"></script>
    <!-- fancybox -->
    <script type="text/javascript" src="/Assets/vendor/fancybox/jquery.fancybox.pack.js"></script>
}

@section PageJS{
    <!-- angular controller -->
    <script src="/Assets/travorama20/js/paymentController.js"></script>
    <script src="/Assets/mobile/js/HotelController.js"></script>
}

<header class="page__header">
    <div class="step__wrapper">
        <div class="step step-1" ng-class="{'active' : PageConfig.ActivePage == 1, 'inactive' : PageConfig.ActivePage > 1}"><span class="xlg-txt">01</span></div>
        <div class="step step-2" ng-class="{'active' : PageConfig.ActivePage == 2, 'inactive' : PageConfig.ActivePage > 2}"><span class="xlg-txt">02</span></div>
        <div class="step step-3" ng-class="{'active' : PageConfig.ActivePage == 3, 'inactive' : PageConfig.ActivePage > 3}"><span class="xlg-txt">03</span></div>
    </div>
</header>
<section class="checkout-content">
    <div class=" page-step-1" ng-show="PageConfig.ActivePage == 1" style="display: none;">
        <div class="form-hotel">
            <h3><b>DATA</b> KONTAK</h3>
            <form name="BuyerForm" novalidate>
                <div class="form-group">
                    <label class="control-label">Titel : </label>
                    <select class="form-control" name="title" ng-model="buyerInfo.title" ng-init="buyerInfo.title = titles[0].value">
                        <option ng-repeat="title in titles" value="{{title.value}}">{{title.name}}</option>
                    </select>
                </div>
                <div class="form-group important">
                    <label class="control-label">Nama Depan (dan Nama Tengah)<span class="imp"></span> : </label>
                    <input type="text" value="" @*pattern="[a-zA-Z\s]+"*@ ng-model="buyerInfo.name" name="name" class="form-control nama" placeholder="Nama Depan" required />
                    @*<div ng-show="!checkName(buyerInfo.name)" style="color:red">
                        Nama tidak boleh mengandung karakter selain alfabet dan spasi
                    </div>*@
                </div>
                <div class="form-group important">
                    <label class="control-label">Nama Belakang/Nama Keluarga<span class="imp"></span> : </label>
                    <input type="text" value="" @*pattern="[a-zA-Z\s]+"*@ ng-model="buyerInfo.name" name="name" class="form-control nama" placeholder="Nama Belakang" required />
                    @*<div ng-show="!checkName(buyerInfo.name)" style="color:red">
                        Nama tidak boleh mengandung karakter selain alfabet dan spasi
                    </div>*@
                </div>
                <div class="form-group important">
                    <label class="control-label">Nomor Telepon<span class="imp"></span> : </label>
                    <div class="row">
                        <div class="col-xs-12 bottom-divider">
                            <p><small>Kode Negara</small></p>
                            <select class="form-control" name="PhoneCode" ng-model="buyerInfo.countryCode" ng-init="buyerInfo.countryCode = '62'">
                                <option ng-repeat="country in Countries" ng-selected="country.dial_code == buyerInfo.countryCode" value="{{country.dial_code}}">{{country.name}} ({{country.dial_code}})</option>
                            </select>
                            @*<input type="number" value="" ng-model="buyerInfo.countryCode" name="PhoneCode" class="form-control" placeholder="Ex : 62 for Indonesia" required />*@
                        </div>
                        <div class="col-xs-12">
                            <p><small>Nomor Telepon (Tanpa Kode Negara)</small></p>
                            <input type="number" value="" ng-model="buyerInfo.phone" name="Phone" class="form-control" placeholder="Ex : 821 2345 6789" required />
                        </div>
                    </div>
                </div>
                <div class="form-group important" ng-class="{'has-error' : BuyerForm.email.$touched && BuyerForm.email.$invalid}">
                    <label class=" control-label">Masukkan alamat e-mail Anda<span class="imp"></span> : </label>
                    <input type="email" value="" ng-model="buyerInfo.email" name="Email" class="form-control" placeholder="Ex: name@domain.com" required />
                </div>
                <div class="form-group">
                    <div class="form-box">
                        <div class="fb-header"><b>Kamar</b> : Deluxe 2 Kings Bed Rooms</div>
                        <div class="fb-body">
                            <div class="fb-top">Tamu per Kamar : <b>4 Orang</b></div>
                            <div class="fb-bottom">
                                <div class="form-group">
                                    <label class="control-label">Titel : </label>
                                    <select class="form-control" name="title" ng-model="buyerInfo.title" ng-init="buyerInfo.title = titles[0].value">
                                        <option ng-repeat="title in titles" value="{{title.value}}">{{title.name}}</option>
                                    </select>
                                </div>
                                <div class="form-group important">
                                    <label class="control-label">Nama Lengkap Tamu : </label>
                                    <input type="text" value="" @*pattern="[a-zA-Z\s]+"*@ ng-model="buyerInfo.name" name="name" class="form-control nama" placeholder="Nama Lengkap" required />
                                </div>
                                <div class="fb-note">
                                    <div>Catatan Khusus:</div>
                                    <ul class="sqr-blue-list md-txt">
                                        <li>
                                            <div class="blue-txt semibold-txt">Room Policy</div>
                                            <div class="grey-txt">Lorem ipsum dolor sit amet.</div>
                                        </li>
                                        <li>
                                            <div class="blue-txt semibold-txt">Room Policy</div>
                                            <div class="grey-txt">Lorem ipsum dolor sit amet.</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-box">
                        <div class="fb-header"><b>Permintaan Khusus</b> (opsional)</div>
                        <div class="fb-body">
                            <textarea name="fb-request" placeholder="Write your special request in English or Indonesian."></textarea>
                            <div class="fb-bed clearfix">
                                Your Bed Preference (if available):
                                <label class="checkbox">
                                    <div class="switch"></div>
                                    <span class="md-txt os-regular title">2 extra-large doubles <span class="double-bed"></span></span>
                                    <input type="checkbox" name="check" class="check" value="false">
                                </label>
                                <label class="checkbox">
                                    <div class="switch"></div>
                                    <span class="md-txt os-regular title">2 singles <span class="single-bed"></span><span class="single-bed"></span>, 1 extra-large double <span class="double-bed"></span></span>
                                    <input type="checkbox" name="check" class="check" value="false">
                                </label>
                            </div>
                            <div class="fb-est md-txt">
                                <p>Your estimated time of arrival</p>
                                <div class="bold-txt">24 hour reception:</div>
                                <div>You can arrive any time you like - <br /> your room will be ready <b>at 15:00</b></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    @*<div style="color:red" ng-show="form.incompleteContactTitle">
                        Gelar pada Nama Kontak Belum Ditambahkan <br /> <br />
                    </div>
                    <div style="color:red" ng-show="form.incompleteContactName">
                        Nama pada Data Kontak Belum Ditambahkan <br /> <br />
                    </div>
                    <div style="color:red" ng-show="form.incompleteContactPhone">
                        Nomor Telepon pada Data Kontak Belum Lengkap. Silakan Pilih Kode Negara atau Lengkapi Nomor Telepon<br /> <br />
                    </div>
                    <div style="color:red" ng-show="form.incompleteContactEmail">
                        Alamat E-Mail pada Data Kontak Belum Ditambahkan<br /> <br />
                    </div>*@
                    <button class="btn btn-yellow form-control" ng-click="validateForm(1)" @*ng-disabled="BuyerForm.$invalid || buyerInfo.title == titles[0].value"*@>LANJUT</button>
                </div>
            </form>
        </div>
    </div>
    <div class=" page-step-2" ng-show="PageConfig.ActivePage == 2" style="display: none;">
        <div class="review-hotel">
            <h3 class="summary__title"><b>REVIEW</b> PESANAN</h3>
            <div class="form-group">
                <div class="form-box">
                    <div class="fb-hotel">
                        <div class="fb-header"><b>Detail Hotel</b></div>
                        <div class="fb-body">
                            @Html.Partial("/Views/Hotel/Shared/Mobile/_HotelDetail.cshtml")
                            @*<div class="fb-hotel">
                                <div class="clearfix">
                                    <div class="col-6 blue-txt bold-txt">B Hotel Bali & Spa</div>
                                    <div class="col-4"><span class="star star-4 e-star pull-right"></span></div>
                                </div>
                                <div class="location sm-txt">Kios Tower AB No. 26, Jl. Karet Pasar Gang Tiong No: 62</div>
                                <div class="fb-img" style="background-image: url(/Assets/mobile/images/Hotel/hotel-detail-lg.jpg)"></div>
                                <div class="md-txt clearfix">
                                    <div class="fb-row clearfix">
                                        <div class="col-4">Check in</div>
                                        <div class="col-6 bold-txt">5 November 2016</div>
                                    </div>
                                    <div class="fb-row clearfix">
                                        <div class="col-4">Check out</div>
                                        <div class="col-6 bold-txt">9 November 2016</div>
                                    </div>
                                    <div class="fb-row clearfix">
                                        <div class="col-4">Malam</div>
                                        <div class="col-6 bold-txt">3 Malam</div>
                                    </div>
                                    <div class="fb-row clearfix">
                                        <div class="col-4">Kamar</div>
                                        <div class="col-6 bold-txt">2 Kamar</div>
                                    </div>
                                </div>
                                <div class="fb-req md-txt">
                                    <p class="bold-txt">Permintaan khusus:</p>
                                    <div>Dolor sit amet, consectetuer adipiscing elit, sed diam nonummy. ectetuer adipiscing elit, sed diam nonummy. </div>
                                </div>
                            </div>*@
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-box">
                    <div class="fb-header"><b>Detail Kamar</b></div>
                    <div class="fb-body">
                        <div class="fb-room">
                            <div class="clearfix">
                                <div class="col-8"><div class="blue-txt bold-txt lg-txt">Deluxe 2 Kings Bed Rooms</div></div>
                                <div class="col-2"><span class="meal-icon pull-right"></span><span class="wifi-icon pull-right"></span></div>
                            </div>
                            <div class="fb-img" style="background-image: url(/Assets/mobile/images/Hotel/hotel-detail-xlg.jpg)"></div>
                            <div class="clearfix">
                                <div class="fb-row clearfix">
                                    <div class="col-6">Jumlah Kamar</div>
                                    <div class="col-4 bold-txt">2 Kamar</div>
                                </div>
                                <div class="fb-row clearfix">
                                    <div class="col-6">Tamu per Kamar</div>
                                    <div class="col-4 bold-txt">2 Orang</div>
                                </div>
                            </div>
                            <ul class="blue-list blue-txt">
                                <li>Extra bed belum termasuk</li>
                                <li>Free Cancelation sebelum H-5 tanggal booking</li>
                            </ul>
                            <div class="fb-note">
                                <div>Catatan Khusus:</div>
                                <ul class="sqr-blue-list">
                                    <li>
                                        <div class="blue-txt semibold-txt">Room Policy</div>
                                        <div class="grey-txt">Lorem ipsum dolor sit amet.</div>
                                    </li>
                                    <li>
                                        <div class="blue-txt semibold-txt">Room Policy</div>
                                        <div class="grey-txt">Lorem ipsum dolor sit amet.</div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @Html.Partial("/Views/Hotel/Shared/Mobile/_PriceDetail.cshtml")
            <div class="tnc-box italic-txt">
                *Harga ini masih bisa berubah, harga final maskapai akan dikonfirmasi kembali pada proses pembayaran
            </div>
            <div class="form-group">
                <button class="btn btn-yellow form-control" ng-click="validateForm(1)" @*ng-disabled="BuyerForm.$invalid || buyerInfo.title == titles[0].value"*@>LANJUT</button>
            </div>
        </div>
    </div>
    <div class=" page-step-3" ng-show="PageConfig.ActivePage == 3" @*style="display: none;"*@>
        <div class="payment">
            <div class="payment-detail clearfix" style="display: none;">
                <h3 class="summary__title"><b>DATA</b> PENUMPANG</h3>
                <div class="summary summary--payment">
                    <div class="summary__body">
                        <form name="paymentMethodForm">
                            <label ng-click="binDiscount.reset('ncc')">
                                <header>
                                    <div class="input-wrapper">
                                        <input type="radio" name="paymentMethod" />
                                    </div>
                                    <h5>Transfer Bank</h5>
                                </header>
                                <section>
                                    <img src="/Assets/images/payment-atm.jpg" alt="Bank Transfer" />
                                </section>
                            </label>
                            <label ng-click="binDiscount.reset('cc')">
                                <header>
                                    <div class="input-wrapper">
                                        <input type="radio" name="paymentMethod" />
                                    </div>
                                    <h5>Kartu Kredit / Debit</h5>
                                </header>
                                <section>
                                    <img src="/Assets/images/payment-cc.jpg" alt="Credit Card" />
                                </section>
                            </label>
                            <label ng-click="binDiscount.reset('ncc')">
                                <header>
                                    <div class="input-wrapper">
                                        <input type="radio" name="paymentMethod" />
                                    </div>
                                    <h5>ATM</h5>
                                </header>
                                <section>
                                    <img src="/Assets/images/payment-atm.jpg" alt="Virtual Account" />
                                </section>
                            </label>
                            <label ng-click="binDiscount.reset('ncc')">
                                <header>
                                    <div class="input-wrapper">
                                        <input type="radio" name="paymentMethod" />
                                    </div>
                                    <h5>Mandiri ClickPay</h5>
                                </header>
                                <section>
                                    <img src="/Assets/images/payment-mandiri.jpg" alt="Mandiri Clickpay" />
                                </section>
                            </label>
                            <label ng-click="binDiscount.reset('ncc')">
                                <header>
                                    <div class="input-wrapper">
                                        <input type="radio" name="paymentMethod" />
                                    </div>
                                    <h5>CIMB Clicks</h5>
                                </header>
                                <section>
                                    <img src="/Assets/images/cimb-clicks.jpg" alt="CIMB Niaga" />
                                </section>
                            </label>
                        </form>
                    </div>
                </div>
                @Html.Partial("/Views/Hotel/Shared/Mobile/_PriceDetail.cshtml")
                <div class="summary summary--voucher">
                    <div class="container_new">
                        <h4>Punya kupon Travorama?</h4>
                        <p>Masukkan di sini</p>
                        <form class="form form-horizontal">
                            <div class="form-group">
                                <input type="text" name="code" value="" class="form-control" ng-model="voucher.code" ng-disabled="voucher.checking || voucher.confirmedCode" />
                                @*<p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH02'">Kode voucher salah</p>
                            <p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH01'">Voucher sudah digunakan</p>
                            <p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH04'">Di bawah pembelian minimum</p>
                            <p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH05'">Voucher tidak dapat digunakan</p>
                            <p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH03'">Voucher sudah habis</p>
                            <p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH06'">Voucher sudah digunakan</p>
                            <p class="bg-danger" ng-show="voucher.checked && voucher.status == 'ERPVCH99'">Voucher tidak dapat digunakan</p>
                            <p class="bg-success" ng-show="voucher.checked && voucher.status == 'Success'">Voucher valid</p>*@
                            </div>
                            <div class="form-group">
                                <div class="col-xs-6 col-xs-offset-6">
                                    <input type="submit" value="CEK" class="btn btn-yellow form-control" ng-click="voucher.check()" ng-disabled="!voucher.code || voucher.checking" ng-hide="voucher.checked" />
                                    @*<input type="submit" value="RESET" class="btn btn-yellow form-control" ng-click="voucher.reset()" ng-show="voucher.checked" />*@
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="book-detail clearfix">
                    <h3 class="summary__title"><b>RINCIAN</b> PEMESANAN</h3>
                    <div class="rr-row clearfix">
                        <div class="col-half semibold-txt">No. Pesanan</div>
                        <div class="col-half right-txt semibold-txt">1234567890</div>
                    </div>
                    <div class="rr-row clearfix">
                        <div class="col-half semibold-txt">Harga Total</div>
                        <div class="col-half bold-txt lg-txt right-txt orange-txt">Rp 999.999.999</div>
                    </div>
                </div>
                <div class="book-hotel clearfix">
                    <div class="blue-txt bold-txt lg-txt">Bliss Hotel Singapore</div>
                    <div class="clearfix">
                        <div class="fb-row clearfix">
                            <div class="col-4">Check in</div>
                            <div class="col-6 bold-txt">5 November 2016</div>
                        </div>
                        <div class="fb-row clearfix">
                            <div class="col-4">Check out</div>
                            <div class="col-6 bold-txt">9 November 2016</div>
                        </div>
                        <div class="fb-row clearfix">
                            <div class="col-4">Malam</div>
                            <div class="col-6 bold-txt">3 Malam</div>
                        </div>
                        <div class="fb-row clearfix">
                            <div class="col-4">Kamar</div>
                            <div class="col-6 bold-txt">2 Kamar</div>
                        </div>
                    </div>
                </div>
                @Html.Partial("/Views/Hotel/Shared/Mobile/_GuestDetail.cshtml")
                @*<div class="guest-detail clearfix">
                    <h3 class="summary__title"><b>RINCIAN</b> TAMU</h3>
                    <div class="clearfix">
                        <div class="rr-row clearfix">
                            <div class="lg-txt">Deluxe 2 Kings Bed Rooms</div>
                            <div class="col-2">Tamu</div>
                            <div class="col-8">Anonymous</div>
                        </div>
                        <div class="rr-row clearfix">
                            <div class="lg-txt">Deluxe Twin Bed Rooms</div>
                            <div class="col-2">Tamu</div>
                            <div class="col-8">Anonymous</div>
                        </div>
                    </div>
                </div>*@

                <div class="step-button">
                    <form name="finalForm" id="finalForm" ng-submit="pay.setPaymentMethod()">
                        <div class="hidden">
                            <input type="text" name="RsvNo" value="" ng-model="rsvNo" />
                            <input type="text" name="Payment.Currency" value="IDR" ng-model="currency" />
                            <input type="text" name="Language" value="" ng-model="language" />

                            <input type="text" name="Payment.Data0" id="vt-token" value="" ng-model="CreditCard.Token" />

                            <p>Voucher Code</p>
                            <input type="text" name="DiscountCode" value="" ng-model="voucher.confirmedCode" />

                            <p>Payment Method</p>
                            <input type="text" name="Payment.Method" value="" ng-model="paymentMethod" />
                        </div>
                        @*<a class="btn btn-grey" ng-click="changePage(3)" ng-disabled="checkoutForm.loading">KEMBALI</a>*@
                        <div class="form-group">
                            <button type="submit" class="btn btn-yellow form-control" ng-disabled="(checkoutForm.loading || !paymentMethod) || !creditCardForm.$valid">BAYAR</button>
                        </div>
                        @*<input type="submit" class="btn btn-yellow" value="{{ !checkoutForm.loading? 'BAYAR' : 'MEMPROSES' }}" ng-disabled="(checkoutForm.loading || !paymentMethod) || !creditCardForm.$valid">*@
                    </form>
                    <form action="" method="post" name="submitForm" id="rsvno" class="hidden">
                        <input type="text" name="RsvNo" value="" id="rsvno-input" />
                        <input type="text" name="PaymentUrl" value="" id="url-input" />
                    </form>
                </div>
            </div>
            <div class="payment-method clearfix" @*style="display: none;"*@>
                <h3 class="summary__title"><b>METODE</b> PEMBAYARAN - TRANSFER</h3>
                <div class="select-bank-wrapper">
                    Silahkan pilih <b>bank</b> di bawah ini yang ingin Anda
                    gunakan: 
                    <form name="selectBankForm" class="clearfix">
                        <label>
                            <div class="input-wrapper iw-bank">
                                <input type="radio" name="selectBank" style="left: 50%;position: absolute;top: 50%;transform: translate(-50%, -50%);margin: 0;">
                            </div>
                            <div class="bank-list">
                                <div class="bank" style="background-image: url(/Assets/images/bank-bca.png)"></div>
                            </div>
                        </label>
                        <label>
                            <div class="input-wrapper iw-bank">
                                <input type="radio" name="selectBank" style="left: 50%;position: absolute;top: 50%;transform: translate(-50%, -50%);margin: 0;">
                            </div>
                            <div class="bank-list">
                                <div class="bank" style="background-image: url(/Assets/images/Bank-Mandiri.png)"></div>
                            </div>
                        </label>
                    </form>
                </div>
                <div class="card-detail">
                    <div class="form-group important">
                        <label class="control-label">Nama pemegang rekening<span class="imp"></span></label>
                        <input type="text" value="" ng-model="buyerInfo.name" name="name" class="form-control nama" placeholder="" required />
                    </div>
                    <p>Silahkan selesaikan pembayaran melalui transfer ke account berikut ini dalam waktu <b>60 menit</b> untuk menghindari pembatalan transaksi secara otomatis</p>
                    <br /><br />
                    <div class="step-button">
                        <form name="finalForm" id="finalForm" ng-submit="pay.setPaymentMethod()">
                            <p class="md-txt">*Dengan klik tombol ‘Bayar’, Anda telah setuju dengan <a class="orange-txt downline-txt" href="@Url.Action("Terms","staticpage")" target="_blank">syarat &amp; ketentuan</a> dan <a class="orange-txt downline-txt" href="@Url.Action("Privacy","staticpage")" target="_blank">kebijakan privasi</a></p>
                            <br />
                            <div class="form-group">
                                <button type="submit" class="btn btn-yellow form-control" ng-disabled="(checkoutForm.loading || !paymentMethod) || !creditCardForm.$valid">BAYAR</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>