@using System.Data.Entity.ModelConfiguration.Conventions
@using Lunggo.ApCommon.Flight.Constant
@using Lunggo.ApCommon.Identity.User
@model List<Lunggo.ApCommon.Flight.Model.FlightReservationForDisplay>

@{
    Layout = "/Views/Shared/_Layout_account.cshtml";
    ViewBag.Title = "Hotel Detail";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Travorama</title>

    <!-- stylesheets -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/application.css">

</head>
<body>
    <!-- page start -->
    <div class="page user-account">

        <header id="site-header" class="site-header">
            @{ Html.RenderPartial("_Mainmenu"); }
        </header>

        <!-- site content start -->
        <div id="site-content" class="site-content">

            <header class="page-header">
                <div class="container">
                    <div class="site-nav"> <a href="#">@Html.I18NString("CW00013")</a> / <strong>@Html.I18NString("CW00157")</strong></div>
                    <hr>
                    <h2 class="page-title"><b>@Html.I18NString("CW00155")</b> @Html.I18NString("CW00156")</h2>
                </div>
            </header><!-- .page-header -->

            <section class="page-content">
                <div class="container">


                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab"><span class="fa fa-users"></span> @Html.I18NString("CW00158")</a></li>
                        <li role="presentation"><a href="#history" aria-controls="history" role="tab" data-toggle="tab"><span class="fa fa-history"></span> @Html.I18NString("CW00169")</a></li>
                        <li role="presentation"><a href="#password" aria-controls="password" role="tab" data-toggle="tab"><span class="fa fa-lock"></span> @Html.I18NString("CW00144")</a></li>
                    </ul>

                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="profile">
                            <h4><b>@Html.I18NString("CW00159")</b> @Html.I18NString("CW00160")</h4>
                            
                            <div class="row">
                                <div class="col-sm-8 col-sm-offset-1">
                                    
                                    @using (Html.BeginForm("ChangeProfile", "Account", FormMethod.Post, new {@class = "user-account-form form-horizontal"}))
                                    {
                                        @Html.AntiForgeryToken()
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">@Html.I18NString("CW00100")</label>
                                            <div class="col-sm-8">
                                                <input type="text" name="FirstName" class="form-control" value="@User.Identity.GetFirstName()" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">@Html.I18NString("CW00101")</label>
                                            <div class="col-sm-8">
                                                <input type="text" name="LastName" class="form-control" value="@User.Identity.GetLastName()" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">@Html.I18NString("CW00161")</label>
                                            <div class="col-sm-8">
                                                <input type="text" name="PhoneNumber" class="form-control" value="@User.Identity.GetPhoneNumber()" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4 col-sm-offset-4">
                                                <button class="btn btn-primary">@Html.I18NString("CW00162")</button>
                                            </div>
                                        </div>
                                    }
                                
                                </div>

                                </div>

                            </div>
                        <div role="tabpanel" class="tab-pane" id="history">
                            <h4><b>@Html.I18NString("CW00170")</b> @Html.I18NString("CW00171")</h4>

                            <div class="history-wrapper">
                                <ul class="history-list">
                                   
                                    <li class="history">
                                        @foreach (var rsv in Model)
                                        {
                                            <div class="history-content-wrapper">
                                                <div class="history-number">
                                                    <img src="@rsv.Itinerary.FlightTrips[0].FlightSegments[0].AirlineLogoUrl" />
                                                </div>
                                                <div class="history-detail">
                                                    <div class="history-name">
                                                        <a href="#">@rsv.Itinerary.FlightTrips[0].FlightSegments[0].AirlineName</a>
                                                        <p><i>@rsv.TripType</i></p>
                                                        Point Reward : @(rsv.Payment.FinalPrice / 100000)
                                                    </div>
                                                    <div class="history-date">
                                                        @switch (rsv.TripType)
                                                        {
                                                            case TripType.OneWay:
                                                                <div class="row">
                                                                    <div class="col-sm-5"><b>@Html.I18NString("CW00172")</b></div>
                                                                    <div class="col-sm-7">@rsv.Itinerary.FlightTrips[0].OriginCity - @rsv.Itinerary.FlightTrips[0].DestinationCity</div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-sm-5"><b>@Html.I18NString("CW00057")</b></div>
                                                                    <div class="col-sm-7">@rsv.Itinerary.FlightTrips[0].DepartureDate.ToString("d MMMM yyyy")</div>
                                                                </div>
                                                                break;
                                                            case TripType.Return:
                                                                <div class="row">
                                                                    <div class="col-sm-5"><b>@Html.I18NString("CW00172")</b></div>
                                                                    <div class="col-sm-7">@rsv.Itinerary.FlightTrips[0].OriginCity - @rsv.Itinerary.FlightTrips[0].DestinationCity</div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-sm-5"><b>@Html.I18NString("CW00057")</b></div>
                                                                    <div class="col-sm-7">@rsv.Itinerary.FlightTrips[0].DepartureDate.ToString("d MMMM yyyy")</div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-sm-5"><b>@Html.I18NString("CW00058")</b></div>
                                                                    <div class="col-sm-7">@rsv.Itinerary.FlightTrips[1].DepartureDate.ToString("d MMMM yyyy")</div>
                                                                </div>
                                                                break;
                                                        }
                                                    </div>
                                                    <div class="history-id">
                                                        <div class="row">
                                                            <div class="col-sm-5"><b>@Html.I18NString("CW00173")</b></div>
                                                            <div class="col-sm-7">@rsv.RsvNo</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-sm-5"><b>@Html.I18NString("CW00174")</b></div>
                                                            <div class="col-sm-7">@rsv.Payment.Status</div>
                                                        </div>
                                                    </div>
                                                    <div class="history-action">
                                                        <a href="@Url.Action("OrderFlightHistoryDetail", "UW620OrderHistory", new {rsvNo = rsv.RsvNo})" target="_blank" class="btn btn-primary">@Html.I18NString("CW00175")</a>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </li>
                                    
                                </ul>
                            </div>
@*
                            <nav class="row text-center">
                                <ul class="pagination">
                                    <li><a href="#">&lt;</a></li>
                                    <li><a href="#" class="active">1</a></li>
                                    <li class="active"><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#">4</a></li>
                                    <li><a href="#">5</a></li>
                                    <li><a href="#">&gt;</a></li>
                                </ul>
                            </nav>
*@
                        </div>
                        <div role="tabpanel" class="tab-pane" id="password">
                            <h4><b>@Html.I18NString("CW00163")</b> @Html.I18NString("CW00164")</h4>
                            <div class="row">
                                <div class="col-sm-8 col-sm-offset-1">
                                    @using (Html.BeginForm("ChangePassword", "Account", FormMethod.Post, new {@class = "user-account-form form-horizontal"}))
                                    {
                                        @Html.AntiForgeryToken()
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">@Html.I18NString("CW00165")</label>
                                            <div class="col-sm-8">
                                                <input type="password" name="OldPassword" class="form-control" placeholder="" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">@Html.I18NString("CW00166")</label>
                                            <div class="col-sm-8">
                                                <input type="password" name="NewPassword" class="form-control" placeholder="" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label">@Html.I18NString("CW00167")</label>
                                            <div class="col-sm-8">
                                                <input type="password" name="ConfirmPassword" class="form-control" placeholder="" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4 col-sm-offset-4">
                                                <button type="submit" class="btn btn-primary">@Html.I18NString("CW00168")</button>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section><!-- .page-content -->


        </div>
        <!-- site content end -->
