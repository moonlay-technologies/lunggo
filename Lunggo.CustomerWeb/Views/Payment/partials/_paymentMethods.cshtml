@using Lunggo.ApCommon.Product.Constant
@using Lunggo.ApCommon.Payment.Constant

<!-- ========================= PAYMENT METHOD ========================= -->
<div class="content-step" id="step-4">
    <h3 class="lg-txt"><b>METODE</b> PEMBAYARAN</h3>
    <div class="payment-wrapper">
        <div class="row">
            <!-- BANK TRANSFER -->
            <div class="box-payment col-xs-12" data-payment-method="@PaymentMethod.BankTransfer">
                <div class="row">
                    <div class="col-xs-5"><img src="/Assets/images/atm.jpg" /></div>
                    <div class="col-xs-7 col-md-6" ng-click="binDiscount.reset('ncc'); methodDiscount.reset('nVA')">
                        <h4>Bank Transfer</h4>
                    </div>
                    <div class="hidden-xs col-md-1 text-center"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></div>
                </div>
                <div class="accordion-content">
                    <div class="separator-desktop"></div>
                    <h3 class="lg-txt"><b>PILIHAN</b> BANK</h3>
                    <div class="row box-pilihan-bank">
                        <div class="col-xs-6 col-sm-3" ng-click="paymentMethod = '@PaymentMethod.BankTransfer';  methodDiscount.reset('nVA')">
                            <div class="img-bank" ng-class="{ 'selected' : (paymentMethod == '@PaymentMethod.BankTransfer') }">
                                <img src="/Assets/images/mandiri.png" alt="Bank Transfer Mandiri">
                            </div>
                            <div class="nama-bank"><p><b>Transfer Bank Mandiri</b></p></div>
                        </div>
                        <div class="col-xs-6 col-sm-3" ng-click="paymentMethod = '@PaymentMethod.VirtualAccount'; methodDiscount.check()">
                            <div class="img-bank" ng-class="{ 'selected' : (paymentMethod == '@PaymentMethod.VirtualAccount') }">
                                <img src="/Assets/images/bersama-prima-alto.jpg" alt="Bank Lainnya">
                            </div>
                            <div class="nama-bank"><p><b>Bank Lainnya <span style="color: red">(Payday Madness)</span></b></p></div>
                        </div>
                    </div>
                    @if (ViewBag.Platform != PlatformType.DesktopWebsite) {
                        Html.RenderPartial("/Views/Payment/partials/_priceDetail.cshtml");
                    }
                    @Html.Partial("/Views/Payment/partials/_payButton.cshtml", PaymentMethod.VirtualAccount)
                </div>
            </div><!-- /BANK TRANSFER -->

            <!-- KARTU KREDIT / DEBIT -->
            <div class="box-payment col-xs-12" data-payment-method="@PaymentMethod.CreditCard">
                <div class="row">
                    <div class="col-xs-5"><img src="/Assets/images/kredit.jpg" /></div>
                    <div class="col-xs-7 col-md-6" ng-click="methodDiscount.reset('nVA')"><h4>Kartu Kredit / Debit</h4></div>
                    <div class="hidden-xs col-md-1 text-center"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></div>
                </div>
                <div class="accordion-content">
                    <div class="separator-desktop"></div>
                    <h3 class="lg-txt"><b>DETAIL</b> KARTU KREDIT / DEBIT</h3>
                    <div class="credit-card-form form-kartu-kredit row">
                        <div class="form-group col-xs-12">
                            <label>Nomor Kartu</label>
                            <input type="number" class="form-control cc-number" maxlength="19" ng-model="CreditCard.Number"
                                    required/>
                            @*<!-- ng-required="(paymentMethod == '@PaymentMethod.CreditCard') && (CreditCard.TwoClick == 'false')" 
                                    ng-blur="binDiscount.check()" 
                            <div ng-show="binDiscount.text != ''" style="color:green">
                                {{binDiscount.text}}
                            </div> --> *@
                            <div ng-show="notifCardLength" style="color:red">
                                Panjang digit kartu harus di antara 12-19 digit.
                            </div>
                        </div>
                        <div class="ccDate col-xs-7" ng-class="{'has-error' : (dateOver || !checkDate(CreditCard.Month, CreditCard.Year))}">
                            <div class="form-group">
                                <label style="width: 100%">Kadaluarsa</label>
                                 <div style="display: none">{{checkDate(CreditCard.Month, CreditCard.Year)}} </div>
                                <div style="width: 38%;">
                                    <input type="number" class="form-control" ng-model="CreditCard.Month" placeholder="MM" maxlength="2">
                                </div>
                                <div style="font-size: 20px; margin: 7px 5px;">/</div>
                                <div style="width: 46%;">
                                    <input type="number" class="form-control" ng-model="CreditCard.Year" placeholder="YYYY" maxlength="4">
                                </div>
                            </div>

@*                              <div class="form-group">
                                    <select class="form-control" ng-model="CreditCard.Month" ng-init="month = 'Bulan'">
                                        <option ng-selected="month.value == 0" ng-click="CreditCard.Month = month.value"
                                                value="{{month.value}}" ng-repeat="month in months">
                                            {{month.name}}
                                        </option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>&nbsp;</label>
                                    <select class="form-control" ng-model="CreditCard.Year" ng-init="year = 'Tahun'">
                                        <option ng-click="CreditCard.Year = year" value="{{year}}"
                                                ng-repeat="year in generateYear()" ng-selected="year == 'Tahun'" >
                                            {{year}}
                                        </option>
                                    </select>
                                </div>
*@
                        </div>
                        <div class="col-xs-5">
                            <div class="form-group">
                                <label>CVV Kartu</label>
                                <input type="number" class="form-control"
                                   placeholder="xxx" maxlength="3" ng-model="CreditCard.Cvv" />
                                   <!-- ng-required="paymentMethod == '@PaymentMethod.CreditCard'" /> -->
                            </div>
                        </div>
                        <div ng-show="dateOver" style="color:red; margin-bottom: 14px;" class="col-xs-12">
                            Tanggal Kadaluarsa harus lebih dari tanggal saat ini.
                        </div>
                        <div class="form-group col-xs-12" ng-class="{'has-error' : !checkName(CreditCard.Name)}">
                            <label>Nama Pemegang Kartu</label>
                            <input type="text" class="form-control" ng-model="CreditCard.Name" required>
                    @* <!--     pattern="^[a-zA-Z ]+$"
                                ng-required="paymentMethod == '@PaymentMethod.CreditCard'"  -->*@ 
                            <div ng-show="!checkName(CreditCard.Name)" style="color:red">
                                Nama tidak boleh mengandung karakter selain alfabet dan spasi
                            </div>
                        </div>
                    </div>
                    @if (ViewBag.Platform != PlatformType.DesktopWebsite) {
                        Html.RenderPartial("/Views/Payment/partials/_priceDetail.cshtml");
                    }
                    @Html.Partial("/Views/Payment/partials/_payButton.cshtml", PaymentMethod.CreditCard)
                </div>
            </div><!-- /KARTU KREDIT / DEBIT -->
            
        @*  <!-- VIRTUAL ACCOUNT -->
            <!-- <div class="box-payment col-xs-12" data-payment-method="@PaymentMethod.VirtualAccount">
                <div class="row" ng-click="setMdr('@PaymentMethod.VirtualAccount')">
                    <div class="col-xs-5"><img src="/Assets/images/atm.jpg" /></div>
                    <div class="col-xs-5 not-selected"><p>Virtual Account</p></div>
                </div>
                <div class="separator-desktop"></div>
                <h3 class="lg-txt"><b>PILIHAN</b> BANK</h3>
                <div class="row box-pilihan-bank">
                    <div class="col-xs-3 ">
                        <div class="img-bank"><img src="/Assets/images/mandiri.png" alt="Bank Mandiri"></div>
                        <div class="nama-bank"><p><b>Bank Mandiri</b></p></div>
                    </div>
                    <div class="col-xs-3 ">
                        <div class="img-bank"><img src="/Assets/images/mandiri.png" alt="Bank Mandiri"></div>
                        <div class="nama-bank"><p><b>Bank Mandiri</b></p></div>
                    </div>
                    <div class="col-xs-3 ">
                        <div class="img-bank"><img src="/Assets/images/mandiri.png" alt="Bank Mandiri"></div>
                        <div class="nama-bank"><p><b>Bank Mandiri</b></p></div>
                    </div>
                    <div class="col-xs-3 ">
                        <div class="img-bank"><img src="/Assets/images/mandiri.png" alt="Bank Mandiri"></div>
                        <div class="nama-bank"><p><b>Bank Mandiri</b></p></div>
                    </div>
                </div>
                <div class="form-bayar">
                    <p>*Dengan klik tombol ‘Bayar’, Anda telah setuju dengan <a href="#">syarat & ketentuan</a> dan <a href="#">kebijakan privasi</a></p>
                    <input type="submit" class="btn btn-yellow md-txt lg-btn col-xs-4" value="BAYAR">
                </div>
            </div> --><!-- /VIRTUAL ACCOUNT -->*@

            <!-- MANDIRI CLICKPAY -->
            <div class="box-payment col-xs-12" data-payment-method="@PaymentMethod.MandiriClickPay">
                <div class="row">
                    <div class="col-xs-5"><img src="/Assets/images/mandiri.jpg" /></div>
                    <div class="col-xs-7 col-md-6" ng-click="methodDiscount.reset('nVA')"><h4>Mandiri Clickpay</h4></div>
                    <div class="hidden-xs col-md-1 text-center"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></div>
                </div>
                <div class="accordion-content">
                    <div class="separator-desktop"></div>
                    <h3 class="lg-txt"><b>DETAIL</b> PEMBAYARAN - <b>MANDIRI CLICKPAY</b></h3>
                    <div class="form-kartu-kredit">
                        <div class="form-group">
                            <label>Nomor Kartu</label>
                            <input type="number" class="form-control cc-number" maxlength="19"
                                    ng-model="MandiriClickPay.CardNo" />
                        </div>
                        <div ng-show="notifCardLength" style="color:red">
                            Panjang digit kartu harus di antara 12-19 digit.
                        </div>
                        <div class="how-to-pay-mandiri">
                            <p>Input Token Mandiri &nbsp;<small>(diisi secara berurutan)</small></p>
                            <div class="row text-group">
                                <div class="col-xs-3 clear-left"><b>APPLI</b></div>
                                <div class="col-xs-9">: 3</div>
                            </div>
                            <div class="row text-group">
                                <div class="col-xs-3 clear-left"><b>Input 1</b></div>
                                <div class="col-xs-9">:
                                    <span ng-if="MandiriClickPay.CardNo.toString().length >= 12">
                                    <!-- <span ng-if="MandiriClickPay.CardNo.length >= 12"> -->
                                        {{MandiriClickPay.CardNo | limitTo:-10}}
                                    </span>
                                    <span ng-if="MandiriClickPay.CardNo.toString().length < 12">
                                        Masukkan nomor kartu terlebih dahulu
                                    </span>
                                </div>
                            </div>
                            <div class="row text-group">
                                <div class="col-xs-3 clear-left"><b>Input 2</b></div>
                                <div class="col-xs-9">: 
                                    {{totalPrice - voucher.amount + UniqueCodePaymentConfig.UniqueCode}}
                                </div>
                            </div>
                            <div class="row text-group">
                                <div class="col-xs-3 clear-left"><b>Input 3</b></div>
                                <div class="col-xs-9">: 
                                    @Model.RsvNo.Substring(Model.RsvNo.Length - 5, 5)
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Respon Token Mandiri</label>
                            <input type="number" class="form-control cc-number" placeholder="xxxxxx"
                               maxlength="6" ng-model="MandiriClickPay.Token" required />
                        @*<!-- name="mandiriToken" -->*@
                        </div>
                    </div>
                    @if (ViewBag.Platform != PlatformType.DesktopWebsite) {
                        Html.RenderPartial("/Views/Payment/partials/_priceDetail.cshtml");
                    }
                    @Html.Partial("/Views/Payment/partials/_payButton.cshtml", PaymentMethod.MandiriClickPay)
                </div>
            </div><!-- /MANDIRI CLICKPAY -->
            
            <!-- CIMB CLICKS -->
            <div class="box-payment col-xs-12" data-payment-method="@PaymentMethod.CimbClicks">
                <div class="row">
                    <div class="col-xs-5"><img src="/Assets/images/cimb.jpg" /></div>
                    <div class="col-xs-7 col-md-6" ng-click="methodDiscount.reset('nVA')"><h4>CIMB Clicks</h4></div>
                    <div class="hidden-xs col-md-1 text-center"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></div>
                </div>
                <div class="accordion-content">
                    <div class="separator-desktop"></div>
                    <p>Pembayaran CIMB Clicks akan diproses di situs Bank CIMB Niaga. Klik tombol bayar di bawah untuk menyelesaikan pembayaran.</p>
                    @if (ViewBag.Platform != PlatformType.DesktopWebsite) {
                        Html.RenderPartial("/Views/Payment/partials/_priceDetail.cshtml");
                    }
                    @Html.Partial("/Views/Payment/partials/_payButton.cshtml", PaymentMethod.CimbClicks)
                </div>
            </div><!-- /CIMB CLICKS -->
        </div>
    </div><!-- .payment-wrapper -->
</div><!-- .content.step#step-4 -->
<!-- ======================= END OF PAYMENT METHOD ======================= -->