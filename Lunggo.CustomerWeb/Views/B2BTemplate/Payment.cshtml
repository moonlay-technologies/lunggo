@{
    Layout = "/Views/Shared/B2BTravorama/_B2BLayout.cshtml";
    ViewBag.BodyClass = "b2b-payment";
    ViewBag.SiteHeader = "b2b-payment";
    ViewBag.Title = "Payment Management";
    ViewBag.AngularController = "B2BPaymentMgmtFormController";

}

@section AdditionalCSS{
    <link href="/Assets/css/jquery-ui.min.css" rel="stylesheet" />
    <!-- fancybox CSS-->
    <link href="/Assets/vendor/fancybox/jquery.fancybox.css" rel="stylesheet" />
}

@section AdditionalJS{
    <script src="/Assets/js/angular.min.js"></script>
    <script src="/Assets/js/angular-route.min.js"></script>
    <script src="/Assets/js/angular-animate.min.js"></script>

    <script src="/Assets/js/moment.min.js"></script>
    <script src="/Assets/js/moment-with-locales.min.js"></script>
    <script src="/Assets/js/xml2json.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular-resource.js"></script>
    <script src="/Assets/B2BTravorama/assets/js/form_elements.js" type="text/javascript"></script>
    <!-- additional Angular JS-->
    <script src="/Assets/js/bootstrap.min.js"></script>
    <!-- veritrans JS -->
    <script src="https://api.sandbox.veritrans.co.id/v2/assets/js/veritrans.min.js"></script>
    <!-- fancybox -->
    <script type="text/javascript" src="/Assets/vendor/fancybox/jquery.fancybox.pack.js"></script>
}

@section PageJS{
    <script src="/Assets/travorama20/js/B2BTravorama20.js"></script>
    <script src="/Assets/travorama20/js/B2BHomeController.js"></script> 
    <script>
        
    </script>
}
<div ng-app="travoramaB2B" ng-controller="B2BPaymentMgmtFormController">
    <div class="payment-page">
        <div class="panel panel-transparent">
            <div class="panel-heading ">
                <div class="panel-title">
                    Payment Management
                </div>
            </div>
            <div class="panel-body m-t-10 payment-body">
                <div ng-show="creditCards.length > 0" id="payment-list">
                    <div class="payment-item col-sm-6 m-b-20" id="payment-item-1" ng-repeat="cc in creditCards track by $index">
                        <div class="pi-wrapper clearfix">
                            <div class="pi-top clearfix">
                                <div class="">
                                    <div class="icon-visa"></div>
                                </div>
                                <div class="clearfix">
                                    <div class="font-montserrat bold cc-no">{{cc.type}} ****{{cc.maskedCardNumber.slice(-4)}}</div>
                                    <div class="small hint-text">Expires {{("0" + (cc.cardExpiry.getMonth() + 1)).slice(-2)}}/{{cc.cardExpiry.getFullYear().toString().slice(-2)}}</div>
                                </div>
                                <button class="btn remove-payment">
                                    <i class="pg-trash"></i>
                                </button>
                            </div>
                            <div class="pi-bottom clearfix font-montserrat bold small">
                                <div class="pi-status"><span class="current-status" ng-show="cc.isPrimaryCard">Primary</span></div>
                                <div class="pi-status"><a class="set-status" ng-show="!cc.isPrimaryCard" ng-click="setPrimary(cc.maskedCardNumber)">Set As Primary Card</a></div>
                                <div class="pull-right"><a href="#" class="btn-edit-payment" ng-click="showEditForm(cc)">Edit</a></div>
                            </div>
                            <div ng-show="successSetPrimary">{{message}}</div>
                        </div>
                    </div>
                </div>
                
                <div class="payment-add col-sm-6 m-b-20" ng-click="addCc()">
                    <div class="pa-wrapper clearfix">
                        <a class="font-montserrat bold" id="add-payment"><i class="fa fa-plus-square m-r-5"></i>ADD PAYMENT METHOD</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade slide-up disable-scroll modal-edit-payment" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog ">
            <div class="modal-content-wrapper">
                <div class="modal-content">
                    <div class="modal-header clearfix text-left">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <i class="pg-close fs-14"></i>
                        </button>
                        <h5 class="p-b-10">Update your <span class="semi-bold">Payment Method</span></h5>
                    </div>
                    <div class="modal-body">
                        <form role="form">
                            <div class="form-group-attached">
                                <div class="row">
                                    <div class="col-sm-12 clearfix m-b-10">
                                        <div class="font-montserrat bold"><i class="fa fa-credit-card m-r-10"></i>{{currentEdit.type}} ****{{currentEdit.cc.slice(-4)}}</div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group form-group-default">
                                            <label>MM</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.month">
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group form-group-default">
                                            <label>YY</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.year">
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group form-group-default">
                                            <label>CVC</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.cvc">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group form-group-default">
                                            <label>Nama Pengguna</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.cardHolderName">
                                        </div>
                                    </div>
                                </div>
                                <div class="row ccnonew hidden">
                                    <div class="col-sm-12">
                                        <div class="form-group form-group-default">
                                            <label>Alamat</label>
                                            <textarea type="text" class="form-control"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row">
                            <div class="col-sm-6 m-t-10 sm-m-t-10">
                                <button type="button" class="btn btn-default btn-cons btn-block m-t-5" data-dismiss="modal">Kembali</button>
                            </div>
                            <div class="col-sm-6 m-t-10 sm-m-t-10">
                                <button type="button" class="btn btn-primary btn-block m-t-5">Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
    
    <div class="modal fade slide-up disable-scroll modal-edit-payment form-add-cc" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog ">
            <div class="modal-content-wrapper">
                <div class="modal-content">
                    <div class="modal-header clearfix text-left">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <i class="pg-close fs-14"></i>
                        </button>
                        <h5 class="p-b-10">Update your <span class="semi-bold">Payment Method</span></h5>
                    </div>
                    <div class="modal-body">
                        <form role="form">
                            <div class="form-group-attached">
                                <div class="row ccnonew">
                                    <div class="col-sm-12">
                                        <div class="form-group form-group-default">
                                            <label>Nomor Kartu Kredit</label>
                                            <textarea type="text" class="form-control" ng-model="currentEdit.cc"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group form-group-default">
                                            <label>MM</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.month">
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group form-group-default">
                                            <label>YY</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.year">
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class="form-group form-group-default">
                                            <label>CVC</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.cvc">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group form-group-default">
                                            <label>Nama Pengguna</label>
                                            <input type="text" class="form-control" ng-model="currentEdit.cardHolderName">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row">
                            <div class="col-sm-6 m-t-10 sm-m-t-10">
                                <button type="button" class="btn btn-default btn-cons btn-block m-t-5" data-dismiss="modal">Kembali</button>
                            </div>
                            <div class="col-sm-6 m-t-10 sm-m-t-10">
                                <button type="button" class="btn btn-primary btn-block m-t-5 saveNewCc">Simpan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
</div>
